<!-- index.html
     OPS Online Support — Home + Chat Entry (v2)

     Notes:
     - No inline JS. Uses /assets/*.js
     - Chat uses gateway endpoint (set in assets/chattia-ui.js config)
     - Privacy/Consent modal required before enabling chat
     - “Compliance-aligned” UX: no sensitive data, no card data, no passwords/OTPs
-->

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>OPS Online Support</title>

  <!-- Basic hardening (best delivered via headers, but meta helps on static hosting) -->
  <meta name="referrer" content="no-referrer" />
  <meta http-equiv="X-Content-Type-Options" content="nosniff" />
  <meta http-equiv="X-Frame-Options" content="DENY" />

  <!-- CSP: keep strict; update connect-src to your gateway -->
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    base-uri 'self';
    object-src 'none';
    frame-ancestors 'none';
    form-action 'self';
    img-src 'self' data:;
    font-src 'self' data:;
    style-src 'self';
    script-src 'self';
    connect-src 'self' https://ops-gateway.grabem-holdem-nuts-right.workers.dev;
    upgrade-insecure-requests;
  " />

  <link rel="icon" href="/assets/favicon.svg" type="image/svg+xml" />

  <!-- Theme + UI -->
  <link rel="stylesheet" href="/assets/chattia-theme.css" />
  <link rel="stylesheet" href="/assets/chattia-ui.css" />

  <!-- Language head helper (sets html[lang] early, no inline JS) -->
  <script defer src="/assets/chattia-head-lang.js"></script>
</head>

<body>
  <a class="skip-link" href="#main">Skip to content</a>

  <header class="site-header" role="banner">
    <div class="brand">
      <a class="brand-link" href="/" aria-label="OPS Online Support Home">
        <span class="brand-mark" aria-hidden="true">OPS</span>
        <span class="brand-text">OPS Online Support</span>
      </a>
    </div>

    <nav class="site-nav" aria-label="Primary">
      <a href="/" class="nav-link" data-i18n="nav_home">Home</a>
      <a href="/pages/about.html" class="nav-link" data-i18n="nav_about">About</a>
      <a href="/pages/contact.html" class="nav-link" data-i18n="nav_contact">Contact</a>
      <a href="/pages/policies.html" class="nav-link" data-i18n="nav_policies">Policies</a>
    </nav>

    <div class="site-actions">
      <!-- Language toggle (no “accept/deny” here; just a user preference) -->
      <button class="btn btn-ghost" id="langToggle" type="button" aria-label="Change language">
        <span aria-hidden="true">EN/ES</span>
      </button>

      <!-- Theme toggle -->
      <button class="btn btn-ghost" id="themeToggle" type="button" aria-label="Toggle theme">
        <span aria-hidden="true">☾</span>
      </button>
    </div>
  </header>

  <main id="main" class="site-main" role="main">
    <section class="hero">
      <h1 class="hero-title" data-i18n="hero_title">Reliable CX, Operations, and Support Workflows</h1>
      <p class="hero-subtitle" data-i18n="hero_subtitle">
        We help organizations run smoother through customer experience support, back-office operations help, and technical support intake.
      </p>

      <div class="hero-ctas">
        <a class="btn btn-primary" href="/pages/contact.html" data-i18n="cta_contact">Contact / Request a Quote</a>
        <a class="btn btn-secondary" href="/pages/policies.html#careers" data-i18n="cta_careers">Careers / Join Us</a>
      </div>

      <p class="hero-note" data-i18n="hero_note">
        For security: do not share passwords, one-time codes, banking info, or card numbers in chat.
      </p>
    </section>

    <section class="cards" aria-label="Services">
      <article class="card">
        <h2 data-i18n="svc_cx_title">Customer Experience (CX)</h2>
        <p data-i18n="svc_cx_body">Inbox triage, customer questions, follow-ups, and service workflows.</p>
      </article>

      <article class="card">
        <h2 data-i18n="svc_cc_title">Contact Center Support</h2>
        <p data-i18n="svc_cc_body">Intake, tagging, escalation, and resolution tracking.</p>
      </article>

      <article class="card">
        <h2 data-i18n="svc_ops_title">Business Operations</h2>
        <p data-i18n="svc_ops_body">Back-office coordination, documentation, and process support.</p>
      </article>

      <article class="card">
        <h2 data-i18n="svc_it_title">IT Support Intake</h2>
        <p data-i18n="svc_it_body">Issue capture, basic troubleshooting steps, and routing to the right team.</p>
      </article>
    </section>
  </main>

  <footer class="site-footer" role="contentinfo">
    <div class="footer-links">
      <a href="/pages/policies.html" data-i18n="footer_policies">Privacy & Terms</a>
      <a href="/pages/contact.html" data-i18n="footer_contact">Contact</a>
      <a href="/pages/about.html" data-i18n="footer_about">About</a>
    </div>
    <div class="footer-meta">
      <span aria-hidden="true">©</span>
      <span id="year"></span>
      <span>OPS Online Support</span>
    </div>
  </footer>

  <!-- Floating Action Buttons -->
  <div class="fab-stack" aria-label="Quick actions">
    <a class="fab" id="fabContact" href="/pages/contact.html" data-i18n="fab_contact" aria-label="Contact Us">Contact</a>
    <a class="fab" id="fabJoin" href="/pages/policies.html#careers" data-i18n="fab_join" aria-label="Join Us">Join</a>
    <button class="fab fab-accent" id="fabChat" type="button" data-i18n="fab_chat" aria-label="Open chat"
            aria-controls="chatDrawer" aria-expanded="false">Chat</button>
  </div>

  <!-- Privacy & Consent Modal (chat stays disabled until accepted) -->
  <dialog class="modal" id="consentModal" aria-labelledby="consentTitle">
    <form method="dialog" class="modal-card">
      <h2 id="consentTitle" data-i18n="consent_title">Privacy & Consent</h2>

      <p class="modal-text" data-i18n="consent_body">
        Chat interactions may be used to improve the chatbot experience. Please do not enter sensitive personal information.
        OPS Online Support does not intentionally collect payment card data, banking info, passwords, or one-time codes.
      </p>

      <div class="modal-actions">
        <button class="btn btn-secondary" id="consentDeny" value="deny" type="submit" data-i18n="consent_deny">Deny</button>
        <button class="btn btn-primary" id="consentAccept" value="accept" type="submit" data-i18n="consent_accept">Accept</button>
      </div>

      <p class="modal-footnote" data-i18n="consent_note">
        If you deny consent, chat will remain disabled until you accept.
      </p>
    </form>
  </dialog>

  <!-- Chat Panel (slides in from right) -->
  <aside class="chat-drawer" id="chatDrawer" aria-label="OPS Assistant" aria-hidden="true">
    <header class="chat-header">
      <div class="chat-title">
        <strong data-i18n="chat_title">OPS Assistant</strong>
        <span class="chat-subtitle" data-i18n="chat_subtitle">Website help • Contact • Careers</span>
      </div>
      <button class="btn btn-ghost" id="chatClose" type="button" aria-label="Close chat">✕</button>
    </header>

    <div class="chat-body" id="chatBody" role="log" aria-live="polite" aria-relevant="additions"></div>

    <form class="chat-input" id="chatForm">
      <!-- Honeypot fields (hidden by CSS) -->
      <input class="hp" type="text" name="hp_email" id="hp_email" autocomplete="off" tabindex="-1" aria-hidden="true" />
      <input class="hp" type="text" name="hp_website" id="hp_website" autocomplete="off" tabindex="-1" aria-hidden="true" />

      <label class="sr-only" for="chatMessage" data-i18n="chat_label">Your message</label>
      <input id="chatMessage" name="message" type="text" maxlength="256" autocomplete="off"
             placeholder="Type your message…" data-i18n-placeholder="chat_placeholder" />

      <button class="btn btn-primary" type="submit" data-i18n="chat_send">Send</button>
    </form>

    <p class="chat-disclaimer" data-i18n="chat_disclaimer">
      Do not share passwords, OTP codes, banking info, or card numbers in chat. Use Contact for sensitive matters.
    </p>
  </aside>

  <!-- App scripts -->
  <script defer src="/assets/chattia-preferences.js"></script>
  <script defer src="/assets/chattia-ui.js"></script>

  <noscript>
    <div class="noscript">
      This site works best with JavaScript enabled. You can still use the Contact and Policies pages without chat.
    </div>
  </noscript>
</body>
</html>
