/* assets/chattia-ui.css */

/* -------------------- Theme tokens -------------------- */
:root{
  color-scheme: light;

  --bg-light: #ffffff;
  --text-light: #0b1220;
  --muted: #6f7585;

  /* Dark background gradient only (surface stays neutral) */
  --bgd-1: #0b3b3a;
  --bgd-2: #07121f;
  --bgd-3: #3a1f66;

  --surface: #ffffff;
  --surface-border: #e5e8f0;
  --surface-soft: #f4f6fa;

  --surface-dark: rgba(10, 16, 28, 0.70);
  --surface-dark-2: rgba(10, 16, 28, 0.85);
  --text-dark: #e7ecff;
  --muted-dark: #a6adc4;

  --border: rgba(0,0,0,0.08);
  --shadow: 0 12px 40px rgba(0,0,0,0.18);

  --accent-green: #28a745;
  --accent-blue: #0d63b2;
  --accent-orange: #f58220;
  --accent-purple: #6d3c99;

  --radius: 16px;
}

html[data-theme="light"], body[data-theme="light"]{
  background: var(--bg-light);
  color: var(--text-light);
}

html[data-theme="dark"], body[data-theme="dark"]{
  color: var(--text-dark);
  background:
    radial-gradient(1100px 700px at 10% 85%, rgba(11,59,58,0.70) 0%, rgba(11,59,58,0.00) 60%),
    radial-gradient(900px 600px at 92% 30%, rgba(58,31,102,0.70) 0%, rgba(58,31,102,0.00) 55%),
    linear-gradient(90deg, var(--bgd-1) 0%, var(--bgd-2) 50%, var(--bgd-3) 100%);
  background-attachment: fixed;
  color-scheme: dark;
}

@keyframes darkGradientShift{
  0%{ background-position: 0% 50%, 90% 30%, 0% 50%; }
  50%{ background-position: 100% 20%, 10% 70%, 100% 50%; }
  100%{ background-position: 0% 50%, 90% 30%, 0% 50%; }
}

html[data-theme="dark"].dark-cycle{
  background-size: 220% 220%;
  animation: darkGradientShift 45s ease-in-out infinite;
}

html, body{ height:100%; }
body{
  margin:0;
  font-family: "Segoe UI", Arial, sans-serif;
  line-height: 1.5;
  letter-spacing: -0.01em;
}

*{ box-sizing:border-box; }
a{ color: var(--accent-blue); text-decoration: none; }
a:hover{ text-decoration: underline; }
:focus-visible{ outline: none; box-shadow: 0 0 0 3px rgba(13,99,178,.25); }

.sr-only{ position:absolute!important; width:1px;height:1px; padding:0;margin:-1px; overflow:hidden;clip:rect(0,0,0,0); white-space:nowrap;border:0; }
.skip-link{ position:absolute; top:10px; left:10px; padding:10px 12px; border-radius: 999px; background:#fff; border:1px solid var(--surface-border); color: var(--text-light); transform: translateY(-120%); transition: transform .12s ease; z-index: 100; }
.skip-link:focus{ transform: translateY(0); }

.noscript{ padding:12px 14px; margin:12px; border-radius: 10px; border: 1px solid #e57373; background: rgba(229,115,115,.12); }

/* -------------------- Layout -------------------- */
.shell.app-shell{
  max-width: 1200px;
  margin: 0 auto;
  padding: 18px 16px 28px;
}

.layout{ display:flex; flex-direction:column; gap:18px; align-items:stretch; }

.topbar{ display:flex; align-items:center; justify-content:space-between; gap:14px; padding: 12px 14px 10px; border-radius: var(--radius); background: var(--surface); border: 1px solid var(--surface-border); box-shadow: var(--shadow); margin-bottom: 16px; }
html[data-theme=\"dark\"] .topbar{ background: var(--surface-dark); border-color: var(--border); }
.top-actions{ display:flex; align-items:center; gap:10px; flex-wrap:wrap; justify-content:flex-end; }
.divider{ width:1px; height:18px; background: var(--surface-border); }
html[data-theme=\"dark\"] .divider{ background: var(--border); }

.panel{ display:block; background: transparent; border:0; box-shadow:none; }

/* -------------------- Chat -------------------- */
.chat-panel{
  background: var(--surface);
  border: 1px solid var(--surface-border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  display:flex;
  flex-direction:column;
  min-height: 540px;
}
html[data-theme="dark"] .chat-panel{ background: var(--surface-dark); border-color: var(--border); }

.chat-head{ display:flex; align-items:center; justify-content:space-between; gap:10px; padding: 12px 14px; border-bottom: 1px solid var(--surface-border); }
.brand-inline{ display:flex; align-items:center; gap:10px; }
.brand-title{ font-weight: 800; font-size: 18px; letter-spacing: -0.02em; }
.brand-sub{ font-size: 12px; color: var(--muted); text-transform: uppercase; letter-spacing: 0.04em; }
html[data-theme="dark"] .brand-sub{ color: var(--muted-dark); }

.chat-head-right{ display:flex; align-items:center; gap:12px; flex-wrap:wrap; justify-content:flex-end; margin-left:auto; }

.status{ display:flex; align-items:center; gap:8px; color: var(--muted); font-size: 12px; }
html[data-theme="dark"] .status{ color: var(--muted-dark); }
.dot{ width:10px; height:10px; border-radius: 50%; background:#2cbe4e; box-shadow:0 0 0 3px rgba(44,190,78,.18); }

.transcript-accordion{
  border: 1px solid var(--surface-border);
  border-radius: 12px;
  background: var(--surface-soft);
  padding: 0 10px;
}
html[data-theme="dark"] .transcript-accordion{ border-color: var(--border); background: var(--surface-dark-2); }
.transcript-accordion summary{
  list-style:none;
  cursor:pointer;
  display:flex;
  align-items:center;
  gap:8px;
  padding: 8px 0;
  font-weight: 700;
}
.transcript-accordion summary::-webkit-details-marker{ display:none; }
.accordion-title{ font-size: 13px; }
.accordion-panel{ border-top: 1px solid var(--surface-border); padding: 10px 0 8px; display:flex; flex-direction:column; gap:10px; min-width: 240px; max-height: 220px; overflow:auto; }
html[data-theme="dark"] .accordion-panel{ border-color: var(--border); }

.mini-actions{ display:flex; align-items:center; gap:8px; }
.ghost-btn{ border:0; background:transparent; color: var(--muted); cursor:pointer; padding:4px 6px; }
.ghost-btn:hover{ color: inherit; text-decoration: underline; }

.chat-log{ flex:1 1 auto; min-height: 320px; padding: 18px 14px 12px; display:flex; flex-direction:column; gap:10px; overflow:auto; }

.msg{ display:flex; flex-direction:column; gap:4px; max-width: 92%; font-size: 14px; }
.msg.user{ align-self:flex-end; }
.msg.bot{ align-self:flex-start; }
.bubble{ border: 1px solid var(--surface-border); background: var(--surface-soft); padding: 10px 12px; border-radius: 12px; line-height: 1.35; white-space: pre-wrap; overflow-wrap:anywhere; }
.msg.user .bubble{ background: rgba(13,99,178,.08); }
.msg.bot .bubble{ background: rgba(40,167,69,.08); }
html[data-theme="dark"] .bubble{ background: rgba(255,255,255,0.05); border-color: var(--border); }
.meta{ font-size: 11px; color: var(--muted); }
html[data-theme="dark"] .meta{ color: var(--muted-dark); }

/* -------------------- Composer -------------------- */
.composer{ border-top: 1px solid var(--surface-border); padding: 12px; background: var(--surface-soft); }
html[data-theme="dark"] .composer{ background: var(--surface-dark-2); border-color: var(--border); }

.input-row{ display:grid; grid-template-columns: auto 1fr auto; gap:10px; align-items:center; margin-bottom: 10px; }
.input-label{ color: #5a5d6b; font-weight: 700; font-size: 13px; }
html[data-theme="dark"] .input-label{ color: var(--text-dark); }

.input-shell{ display:flex; align-items:center; border: 1px solid #4b4f5c; background:#fff; border-radius: 10px; padding-right: 6px; }
html[data-theme="dark"] .input-shell{ background: var(--surface-dark); border-color: var(--border); }
.input{ flex:1 1 auto; height: 44px; border:0; padding: 0 10px; background:transparent; color: inherit; font-size: 14px; }
.input:focus{ outline:none; }
.hp-wrap{ position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden; }

.mic-inline{ border:0; background:transparent; color: var(--accent-purple); padding: 4px; cursor:pointer; }
.mic-inline:hover{ color: #4b3b82; }
.mic-inline.active{ color: var(--accent-orange); }

.ic{ width:18px;height:18px; fill: currentColor; }

.send-btn{ width: 70px; height: 46px; border: 2px solid var(--surface-border); border-radius: 10px; background: #e9f4eb; color: var(--accent-green); display:grid; place-items:center; cursor:pointer; }
.send-btn:hover{ filter: brightness(1.05); }
.send-btn:active{ transform: translateY(1px); }
.send-btn[disabled]{ opacity:.5; cursor:not-allowed; }
.send-btn .ic{ width:26px; height:26px; }

.composer-meta{ display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom: 8px; color: var(--muted); font-size: 12px; }
html[data-theme="dark"] .composer-meta{ color: var(--muted-dark); }
.voice-status{ min-height: 18px; }

.consent-note{ font-size: 13px; color: #c0392b; margin-bottom: 8px; }

.footnote{ display:flex; align-items:center; justify-content:space-between; flex-wrap:wrap; gap:10px; border-top: 1px solid var(--surface-border); padding-top: 10px; }
html[data-theme="dark"] .footnote{ border-color: var(--border); }
.policy-links{ display:flex; flex-wrap:wrap; gap:12px; font-size: 13px; }
.pill-link{ border:0; padding:0; background:transparent; color: var(--accent-blue); text-decoration: underline; border-radius:0; cursor:pointer; }
.policy-link-btn{ border:0; padding:0; background:transparent; color: var(--accent-blue); text-decoration: underline; border-radius:0; cursor:pointer; font: inherit; }

.footnote-actions{ display:flex; align-items:center; gap:10px; }
.tnc{ border:1px solid var(--surface-border); background: #fff; color: var(--muted); border-radius: 14px; height: 30px; padding: 0 12px; cursor:pointer; }
html[data-theme="dark"] .tnc{ background: var(--surface-dark); border-color: var(--border); color: var(--text-dark); }
.footer-brand{ color:#2c9d54; font-weight: 700; }

/* -------------------- Buttons -------------------- */
.pill-btn{ height: 36px; padding: 0 14px; border-radius: 10px; border: 1px solid var(--surface-border); background: #fff; color: inherit; display:inline-flex; align-items:center; gap:8px; cursor:pointer; }
html[data-theme="dark"] .pill-btn{ background: var(--surface-dark); border-color: var(--border); }
.pill-btn:hover{ filter: brightness(1.02); }
.pill-btn.accent{ background: var(--accent-orange); color:#fff; border-color: var(--accent-orange); }

.text-btn{ border:0; background:transparent; color: inherit; cursor:pointer; font-weight: 700; }
.text-btn:hover{ text-decoration: underline; }

.card{ background: var(--surface); border: 1px solid var(--surface-border); border-radius: var(--radius); box-shadow: var(--shadow); }
html[data-theme=\"dark\"] .card{ background: var(--surface-dark); border-color: var(--border); }

.btn{ padding: 10px 12px; border-radius: 12px; border: 1px solid var(--border); background: transparent; cursor:pointer; color: inherit; }
.btn-primary{ border: none; background: rgba(34, 197, 94, 0.9); color: #06101a; }
.btn-danger{ border: none; background: rgba(239, 68, 68, 0.9); color: #06101a; }

/* -------------------- Drawer -------------------- */
.drawer-overlay{ position: fixed; inset:0; background: rgba(0,0,0,0.45); opacity:0; pointer-events:none; transition: opacity 180ms ease; z-index: 9998; }
.drawer-overlay.open{ opacity:1; pointer-events:auto; }

.drawer{ position: fixed; top:0; right:0; height:100%; width: min(420px, 92vw); transform: translateX(100%); transition: transform 220ms ease; z-index: 9999; background: rgba(255,255,255,0.92); color: var(--text-light); border-left: 1px solid rgba(0,0,0,0.12); box-shadow: 0 16px 60px rgba(0,0,0,0.35); display:flex; flex-direction:column; }
html[data-theme="dark"] .drawer{ background: var(--surface-dark-2); color: var(--text-dark); border-left: 1px solid var(--border); backdrop-filter: blur(16px); }
.drawer.open{ transform: translateX(0); }
.drawer-header{ display:flex; align-items:center; justify-content:space-between; padding: 14px 14px; border-bottom: 1px solid var(--border); }
.drawer-body{ padding: 12px 14px; height: calc(100% - 56px); overflow:auto; display:flex; flex-direction:column; gap:12px; }
.drawer-actions{ display:flex; gap:10px; justify-content:flex-end; flex-wrap:wrap; }
.transcript-list{ display:flex; flex-direction:column; gap:10px; }
.transcript-item{ padding: 10px 10px; border: 1px solid var(--border); border-radius: 12px; }
.transcript-role{ font-size: 12px; opacity: 0.8; margin-bottom: 6px; }

/* -------------------- Modals -------------------- */
.modal-overlay{ position: fixed; inset:0; background: rgba(0,0,0,0.45); opacity:0; pointer-events:none; transition: opacity 180ms ease; z-index: 10000; }
.modal-overlay.open{ opacity:1; pointer-events:auto; }
.modal{ position: fixed; left:50%; top:50%; transform: translate(-50%, -50%) scale(0.98); width: min(720px, 92vw); max-height: 82vh; overflow:auto; padding: 18px 18px; z-index: 10001; background: rgba(255,255,255,0.96); color: var(--text-light); border: 1px solid rgba(0,0,0,0.14); border-radius: 18px; box-shadow: 0 18px 70px rgba(0,0,0,0.40); }
html[data-theme="dark"] .modal{ background: var(--surface-dark-2); color: var(--text-dark); border: 1px solid var(--border); backdrop-filter: blur(16px); }
.modal h2{ margin: 0 0 10px 0; }
.modal h3{ margin: 12px 0 6px 0; }
.modal p, .modal li{ line-height: 1.45; }
.modal-actions{ display:flex; gap:10px; justify-content:flex-end; margin-top: 14px; }

/* -------------------- Toast / footer -------------------- */
.toast{ position: fixed; left: 16px; right: 16px; bottom: 16px; max-width: 920px; margin: 0 auto; border-radius: 12px; background: #fff; border: 1px solid var(--surface-border); box-shadow: var(--shadow); padding: 14px; display:none; z-index: 50; }
.toast-title{ font-weight: 800; letter-spacing: -0.02em; margin-bottom: 6px; }
.toast-body{ color: var(--muted); font-size: 12px; line-height: 1.35; }
.toast-actions{ margin-top: 10px; display:flex; gap:10px; justify-content:flex-end; }

.footer{ padding: 18px 6px 0; text-align:center; color: var(--muted); font-size: 12px; }

/* -------------------- Responsive -------------------- */
@media (max-width: 1024px){
  .chat-head{ flex-direction:column; align-items:flex-start; gap:12px; }
  .chat-head-right{ width:100%; justify-content:space-between; }
}

@media (max-width: 640px){
  .input-row{ grid-template-columns: 1fr; }
  .send-btn{ width:100%; }
  .footnote{ flex-direction:column; align-items:flex-start; }
}
